{
  "hash": "def8b2f4a78a1628b180c6f39599bef1",
  "result": {
    "markdown": "# Presentation and visualisation {#presentation}\n\n\n\n::: {.alert .alert-secondary}\nNote: this has been moved from a discussion of the EA survey in the ea-data repo, and is being expanded here\n\nNOTE: this is being moved to [our 'how to visualize'](https://rethinkpriorities.github.io/how-to-visualize/) ... more still needs to be moved\n:::\n\n## Tables\n\nData tables, so users can sort view them\n\n::: {.cell}\n\n```{.r .cell-code}\n(\nmtcars_data_table <-  mtcars %>%\n mutate(across(is.numeric, round, digits = 2)) %>%\n  DT::datatable(class = 'cell-border stripe')\n)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-4512df940ad10c85dbea\" style=\"width:100%;height:auto;\" class=\"datatables html-widget\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-4512df940ad10c85dbea\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"Mazda RX4\",\"Mazda RX4 Wag\",\"Datsun 710\",\"Hornet 4 Drive\",\"Hornet Sportabout\",\"Valiant\",\"Duster 360\",\"Merc 240D\",\"Merc 230\",\"Merc 280\",\"Merc 280C\",\"Merc 450SE\",\"Merc 450SL\",\"Merc 450SLC\",\"Cadillac Fleetwood\",\"Lincoln Continental\",\"Chrysler Imperial\",\"Fiat 128\",\"Honda Civic\",\"Toyota Corolla\",\"Toyota Corona\",\"Dodge Challenger\",\"AMC Javelin\",\"Camaro Z28\",\"Pontiac Firebird\",\"Fiat X1-9\",\"Porsche 914-2\",\"Lotus Europa\",\"Ford Pantera L\",\"Ferrari Dino\",\"Maserati Bora\",\"Volvo 142E\"],[21,21,22.8,21.4,18.7,18.1,14.3,24.4,22.8,19.2,17.8,16.4,17.3,15.2,10.4,10.4,14.7,32.4,30.4,33.9,21.5,15.5,15.2,13.3,19.2,27.3,26,30.4,15.8,19.7,15,21.4],[6,6,4,6,8,6,8,4,4,6,6,8,8,8,8,8,8,4,4,4,4,8,8,8,8,4,4,4,8,6,8,4],[160,160,108,258,360,225,360,146.7,140.8,167.6,167.6,275.8,275.8,275.8,472,460,440,78.7,75.7,71.1,120.1,318,304,350,400,79,120.3,95.1,351,145,301,121],[110,110,93,110,175,105,245,62,95,123,123,180,180,180,205,215,230,66,52,65,97,150,150,245,175,66,91,113,264,175,335,109],[3.9,3.9,3.85,3.08,3.15,2.76,3.21,3.69,3.92,3.92,3.92,3.07,3.07,3.07,2.93,3,3.23,4.08,4.93,4.22,3.7,2.76,3.15,3.73,3.08,4.08,4.43,3.77,4.22,3.62,3.54,4.11],[2.62,2.88,2.32,3.21,3.44,3.46,3.57,3.19,3.15,3.44,3.44,4.07,3.73,3.78,5.25,5.42,5.34,2.2,1.61,1.83,2.46,3.52,3.44,3.84,3.85,1.94,2.14,1.51,3.17,2.77,3.57,2.78],[16.46,17.02,18.61,19.44,17.02,20.22,15.84,20,22.9,18.3,18.9,17.4,17.6,18,17.98,17.82,17.42,19.47,18.52,19.9,20.01,16.87,17.3,15.41,17.05,18.9,16.7,16.9,14.5,15.5,14.6,18.6],[0,0,1,1,0,1,0,1,1,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,1,0,1,0,0,0,1],[1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1],[4,4,4,3,3,3,3,4,4,4,4,3,3,3,3,3,3,4,4,4,3,3,3,3,3,4,5,5,5,5,5,4],[4,4,1,1,2,1,4,2,2,4,4,3,3,3,4,4,4,1,2,1,1,2,2,4,2,1,2,2,4,6,8,2]],\"container\":\"<table class=\\\"cell-border stripe\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>mpg<\\/th>\\n      <th>cyl<\\/th>\\n      <th>disp<\\/th>\\n      <th>hp<\\/th>\\n      <th>drat<\\/th>\\n      <th>wt<\\/th>\\n      <th>qsec<\\/th>\\n      <th>vs<\\/th>\\n      <th>am<\\/th>\\n      <th>gear<\\/th>\\n      <th>carb<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[1,2,3,4,5,6,7,8,9,10,11]},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n## Aside: EA Forum organisation, collophon, formatting\n\n## Visualizations\n\nMOVED to [how-to-visualize](https://rethinkpriorities.github.io/how-to-visualize/)\n\nSee also Gdoc: [visualisation discussions](https://docs.google.com/document/d/1U_k_sIPDQmkKgatgXStDqrwi-g3vPGgftYbN8AEDPhs/edit#)\n\n### Ideal coding practice for visualisations {.unnumbered}\n\nMOVED much content to [how-to-visualize](https://rethinkpriorities.github.io/how-to-visualize/)\n\nWill move the below over as well\n\n### Case: Relative shares of a total; e.g. 'shares of EA population by referrer', or 'donation totals by country' {.unnumbered}\n\n**Treemaps**\n\n::: {.alert .alert-secondary}\nNOTE: The below will not run without data, but we cannot make data 'public' here ... we can swap this for built in R or simulated data in this discussion\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ngeom_treemap_opts <- list(geom_treemap(alpha = 0.7),\n  geom_treemap_text(fontface = \"italic\", colour = \"white\", place = \"centre\",\n                    grow = TRUE, min.size = 1 ),\n  theme(legend.position = \"none\",\n        plot.title = element_text(hjust = 0.5))\n  )\n\n(\n  don_share_by_size <- eas_20 %>% select(donation_2019_c, donation_2019_c_split) %>%\n  group_by(donation_2019_c_split) %>%\n  summarise(total_don = sum(donation_2019_c, na.rm=TRUE)) %>%\n  mutate(don_share = round(total_don/sum(total_don)*100)) %>%\n  filter(!is.na(donation_2019_c_split)) %>%\n  ggplot(aes(area = total_don, fill= donation_2019_c_split,\n             # Include percentage of total donation\n             label = paste(donation_2019_c_split, paste0(don_share, \"%\"), sep = \"\\n\"))) +\n    geom_treemap_opts +\n  ggtitle(\"Share of total 2019 reported donation amount, by donation size\")\n)\n```\n\n::: {.cell-output-display}\n![](presentation_method_discussion_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\nA good alternative to the treemap ... conveying both absolute amounts and rates in the same graph?\n\n### Case: Likert scale (individual items) and relative responses to these {.unnumbered}\n\nThe combination of stacked bar charts and overlayed error/CI bars for some 'middle split' seems informative:\n\n::: {.cell}\n\n```{.r .cell-code}\nknitr::include_url(\"https://rethinkpriorities.github.io/ea_data_public/eas-engagement.html#summary-charts\")\n```\n\n<iframe src=\"https://rethinkpriorities.github.io/ea_data_public/eas-engagement.html#summary-charts\" width=\"672\" height=\"400px\" data-external=\"1\"></iframe>\n:::\n\nAbove: from [EAS engagement post, bookdown supplement](https://rethinkpriorities.github.io/ea_data_public/eas-engagement.html#summary-charts)\n\n### Issue: Dealing with scales and large differences in magnitudes {.unnumbered}\n\nIf axes are cut and don't go to zero, mention this prominently in the plot.\n\nBut what if we have a few values that are way above others, and 'mess up the scale'?\n\nSometimes a logarithmic scale is helpful, but that can also lead to confusion. Otherwise...\n\n-   \"any CI's or other things that go outside of the limits should just be extended to the edge and not dropped)\"\n    -   doable with `scale_y_continuous( oob = scales::squish) + scale_x_continuous( oob = scales::squish)` or  `coord_cartesian`\n\n-   or otherwise allow a clear 'break' in the axis?\n\n-   Not possible to break the axis ggplot <https://stackoverflow.com/questions/7194688/using-ggplot2-can-i-insert-a-break-in-the-axis>\n\n-   ... what about 'extending to the edge'?\n\nRemove outliers as a last resort; prominently mention this where doing so.\n\n### Case: Means of continuous variables: differences across groups {.unnumbered}\n\nSome (imperfect) examples from donation post:\n\n![](https://rethinkpriorities.github.io/ea_data_public/ea_survey_work_files/figure-html/gap-actual-planned-2019-1.png)\n\n![](https://rethinkpriorities.github.io/ea_data_public/ea_survey_work_files/figure-html/planned_actual_gwwc-1.png)\n\n-   Vertical lines for 'medians and means' help put this in context\n\n### Case: Categorical outcomes by continuous outcomes (and vice/versa) {.unnumbered}\n\n::: {.cell}\n\n```{.r .cell-code}\nknitr::include_url(\"https://rethinkpriorities.github.io/ea_data_public/eas-engagement.html#engagement-by-age-and-tenure\")\n```\n\n<iframe src=\"https://rethinkpriorities.github.io/ea_data_public/eas-engagement.html#engagement-by-age-and-tenure\" width=\"672\" height=\"400px\" data-external=\"1\"></iframe>\n:::\n\nAbove, from the [EAS engagement post bookdown](https://rethinkpriorities.github.io/ea_data_public/eas-engagement.html#engagement-by-age-and-tenure), we combine a `geom_point` with a `geom_smooth`.[^presentation_method_discussion-1]\n\n[^presentation_method_discussion-1]: DR: I'm slightly concerned about misinterpretations of the smoothed thing though ... those shaded regions maybe should not be interpreted as CI?\n\n::: {.callout-note collapse=\"true\"}\n## ggplotly pros and cons\n\nHere, I think the use of `%>% ggplotly` yields only one helpful feature (but it's very helpful): hovering over a dot or point on the line brings up an exact value label. I think this helps a reader understand 'what the heck this is'. On the other hand, Plotly makes it easy to distort the sizes of the graphs in inconvenient ways, and using ggplotly can be incompatible with certain other features. \n\n::: \n\n\n### Case: Visualizing (regression) model coefficients and confidence intervals {.unnumbered}\n\nForest plots as seen [in donation post here](https://rethinkpriorities.github.io/ea_data_public/eas_donations.html#predictive-models)\n\n![](https://rethinkpriorities.github.io/ea_data_public/ea_survey_work_files/figure-html/fp_demog_coefs_qp-1.png)\n\nOur `group_fp_do` function makes this easy to do.\n\nSee how we group the coefficients into plots by 'theme'\n\n\\\n\nIn some contexts, lines for 'base rates' can be helpful\n\n![](https://daaronr.github.io/dualprocess/impact_of_impact_multi_experiment_files/figure-html/Bayesian_Forest_Plots-2.png) ... context, scroll up from [here](https://daaronr.github.io/dualprocess/donor-voice-questions-and-tests.html#q-does-including-impact-information-affect-the-amount-raised-1)",
    "supporting": [
      "presentation_method_discussion_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../site_libs/htmlwidgets-1.5.4/htmlwidgets.js\"></script>\n<link href=\"../site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/datatables-binding-0.22/datatables.js\"></script>\n<script src=\"../site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"../site_libs/dt-core-1.11.3/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\n<link href=\"../site_libs/dt-core-1.11.3/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/dt-core-1.11.3/js/jquery.dataTables.min.js\"></script>\n<link href=\"../site_libs/crosstalk-1.2.0/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/crosstalk-1.2.0/js/crosstalk.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}